import{F as U,T as V,S as K,P as Q,D as z,A as X,a as Y,R as A,M as F,b as N,o as Z,W as ee,O as te,c as k,d as ne,e as ae,V as O,f as oe,C as re,g as se,h as ie,i as le}from"./vendor.132b9264.js";const ce=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))f(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&f(d)}).observe(document,{childList:!0,subtree:!0});function h(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(e){if(e.ep)return;e.ep=!0;const a=h(e);fetch(e.href,a)}};ce();var de=(w,c)=>{const h=w.__vccOpts||w;for(const[f,e]of c)h[f]=e;return h};const ue={class:"webgl"},he={setup(w){const c=new U,h=new V;let f,e;const a=0,d=1;function C(i){return new Promise((n,o)=>{c.load(i,t=>{n(JSON.parse(t))},null,t=>{o(t)})})}const l={width:window.innerWidth,height:window.innerHeight};var u=new K,s=new Q(75,l.width/l.height,1,2e3);s.position.set(370,370,-15);let b=new z(16777215);b.position.set(s.position.x,s.position.y,+s.position.z),b.layers.set(a,d),u.add(b);let x=new z(16777215);x.position.set(0,0,1),x.layers.set(d),u.add(x);let G=new X(16777215,.5);u.add(G);let M=h.load("../8081_earthmap10k.jpeg"),y=300,I=128,T=128,W=new Y(y,I,T);M.wrapS=A,M.wrapT=A;let $=new F({map:M,color:3368618}),j=new N(W,$);j.layers.set(a),u.add(j);let m=null;function L(i,n){let o=new oe(i),t=305,r=o.extrude({amount:t-y,bevelEnabled:!1}),p=n.incidence/500;r.vertices.forEach(function(g,J){let _;J<r.vertices.length/2?_=y:_=y+p;let E=(90-g.y)*Math.PI/180,R=(360-g.x)*Math.PI/180;g.x=_*Math.sin(E)*Math.cos(R),g.y=_*Math.cos(E),g.z=_*Math.sin(E)*Math.sin(R)});const S=5e3;let v=parseFloat(n.incidence);v=v>S?S:v;let P=(255-Math.round(v/S*255)).toString(16).padStart(2,"0"),B=new re(`#${P}${P}${P}`),H=new F({color:B,side:se}),D=new N(r,H);D.layers.set(d),m.add(D)}function q(){m&&u.remove(m),m=new ae,u.add(m),f.features.forEach(function(i){const n=i.properties.NUTS_ID,o=e.find(t=>t.nuts==n);if(!!o)if(i.geometry.coordinates.length===1){let t=[];i.geometry.coordinates[0].forEach(function(r){t.push(new O(r[0],r[1]))}),L(t,o)}else i.geometry.coordinates.forEach(function(t){if(t.length==1){let r=[];t[0].forEach(function(p){r.push(new O(p[0],p[1]))}),L(r,o)}else{let r=[];t.forEach(function(p){r.push(new O(p[0],p[1]))}),L(r,o)}})})}return Z(async()=>{let i=document.querySelector("canvas.webgl");var n=new ee({canvas:i,antialias:!0});n.setClearColor(4210752),n.setSize(l.width,l.height);var o=new te(s,n.domElement);o.enableDamping=!0,o.dampingFactor=.05,o.screenSpacePanning=!0,o.zoomSpeed=.1,window.addEventListener("resize",()=>{l.width=window.innerWidth,l.height=window.innerHeight,s.aspect=l.width/l.height,s.updateProjectionMatrix(),n.setSize(l.width,l.height)});const t=()=>{n.autoClear=!0,s.layers.set(a),n.render(u,s),n.autoClear=!1,s.layers.set(d),n.render(u,s),window.requestAnimationFrame(t)};f=await C("NUTS_RG_60M_2021_4326_lvl1.geojson"),e=await C("sample-covid-data-2022-10.json"),q(),t()}),(i,n)=>(k(),ne("canvas",ue))}};var fe=de(he,[["__scopeId","data-v-9dbbdc8c"]]);const pe={setup(w){return(c,h)=>(k(),ie(fe))}};le(pe).mount("#app");
