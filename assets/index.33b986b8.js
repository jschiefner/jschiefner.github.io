import{V as re,O as Qe,S as Ze,P as Xe,R as et,a as Q,r as F,D as Z,A as tt,b as at,c as we,M as ke,d as de,e as Se,o as Ne,W as st,f as nt,B as ot,w as ue,g as M,h as P,i as e,t as O,u as m,p as fe,j as _e,T as X,E as ee,k as it,l as ct,C as he,m as lt,n as rt,q as dt,s as ut,v as ht,x as mt,y as pt,z as ft,L as _t,F as gt,G as vt,H as Me,I as yt,J as bt,K as wt,N as kt,Q as U,U as z,X as se,Y as St,Z as xt,_ as $,$ as ge,a0 as Ct,a1 as Te,a2 as Dt,a3 as It,a4 as xe,a5 as Nt,a6 as Ce,a7 as Mt}from"./vendor.82dfd692.js";const Tt=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function a(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=a(o);fetch(o.href,c)}};Tt();const Y=2500,ae=1e4,me=.03,Lt=.1,Le=.7,$e=138,V=.8,De=3,$t=function(t){t=parseFloat(t);const s=t/Y*5;return s<De?De:s};function ne(t,s,a){let n,o,c,p,S,g,N,w;switch(p=Math.floor(t*6),S=t*6-p,g=a*(1-s),N=a*(1-S*s),w=a*(1-(1-S)*s),p%6){case 0:n=a,o=w,c=g;break;case 1:n=N,o=a,c=g;break;case 2:n=g,o=a,c=w;break;case 3:n=g,o=N,c=a;break;case 4:n=w,o=g,c=a;break;case 5:n=a,o=g,c=N;break}return{r:Math.round(n*255),g:Math.round(o*255),b:Math.round(c*255)}}function pe(t){var s=t.toString(16);return s.length==1?"0"+s:s}function Be({r:t,g:s,b:a}){return"#"+pe(t)+pe(s)+pe(a)}const Bt=function(t){t=parseFloat(t);let s;if(t<Y){const a=(1-t/Y)*$e/360;s=ne(a,V,Le)}else{t>=ae&&(t=ae),t-=Y;const a=1-t/(ae-Y)*V;s=ne(0,V,a)}return Be(s)},jt=function(t){let s;if(t<=me){const a=(1-t/me)*$e/360;s=ne(a,V,Le)}else{const a=1-t/(Lt-me)*V;s=ne(0,V,a)}return Be(s)};var R={extrusion:$t,colorByIncidence:Bt,colorByProportion:jt,maxIncidence:ae};const Ot={Andorra:"ad","United Arab Emirates":"ae",Afghanistan:"af","Antigua and Barbuda":"ag",Anguilla:"ai",Albania:"al",Armenia:"am",Angola:"ao",Antarctica:"aq",Argentina:"ar","American Samoa":"as",Austria:"at",Australia:"au",Aruba:"aw","\xC5land Islands":"ax",Azerbaijan:"az","Bosnia and Herzegovina":"ba",Barbados:"bb",Bangladesh:"bd",Belgium:"be","Burkina Faso":"bf",Bulgaria:"bg",Bahrain:"bh",Burundi:"bi",Benin:"bj","Saint Barth\xE9lemy":"bl",Bermuda:"bm",Brunei:"bn",Bolivia:"bo","Caribbean Netherlands":"bq",Brazil:"br",Bahamas:"bs",Bhutan:"bt","Bouvet Island":"bv",Botswana:"bw",Belarus:"by",Belize:"bz",Canada:"ca","Cocos (Keeling) Islands":"cc","DR Congo":"cd","Central African Republic":"cf","Republic of the Congo":"cg",Switzerland:"ch","C\xF4te d'Ivoire (Ivory Coast)":"ci","Cook Islands":"ck",Chile:"cl",Cameroon:"cm",China:"cn",Colombia:"co","Costa Rica":"cr",Cuba:"cu","Cape Verde":"cv",Cura\u00E7ao:"cw","Christmas Island":"cx",Cyprus:"cy",Czechia:"cz",Germany:"de",Djibouti:"dj",Denmark:"dk",Dominica:"dm","Dominican Republic":"do",Algeria:"dz",Ecuador:"ec",Estonia:"ee",Egypt:"eg","Western Sahara":"eh",Eritrea:"er",Spain:"es",Ethiopia:"et","European Union":"eu",Finland:"fi",Fiji:"fj","Falkland Islands":"fk",Micronesia:"fm","Faroe Islands":"fo",France:"fr",Gabon:"ga","United Kingdom":"gb",Grenada:"gd",Georgia:"ge","French Guiana":"gf",Guernsey:"gg",Ghana:"gh",Gibraltar:"gi",Greenland:"gl",Gambia:"gm",Guinea:"gn",Guadeloupe:"gp","Equatorial Guinea":"gq",Greece:"gr","South Georgia":"gs",Guatemala:"gt",Guam:"gu","Guinea-Bissau":"gw",Guyana:"gy","Hong Kong":"hk","Heard Island and McDonald Islands":"hm",Honduras:"hn",Croatia:"hr",Haiti:"ht",Hungary:"hu",Indonesia:"id",Ireland:"ie",Israel:"il","Isle of Man":"im",India:"in","British Indian Ocean Territory":"io",Iraq:"iq",Iran:"ir",Iceland:"is",Italy:"it",Jersey:"je",Jamaica:"jm",Jordan:"jo",Japan:"jp",Kenya:"ke",Kyrgyzstan:"kg",Cambodia:"kh",Kiribati:"ki",Comoros:"km","Saint Kitts and Nevis":"kn","North Korea":"kp","South Korea":"kr",Kuwait:"kw","Cayman Islands":"ky",Kazakhstan:"kz",Laos:"la",Lebanon:"lb","Saint Lucia":"lc",Liechtenstein:"li","Sri Lanka":"lk",Liberia:"lr",Lesotho:"ls",Lithuania:"lt",Luxembourg:"lu",Latvia:"lv",Libya:"ly",Morocco:"ma",Monaco:"mc",Moldova:"md",Montenegro:"me","Saint Martin":"mf",Madagascar:"mg","Marshall Islands":"mh","North Macedonia":"mk",Mali:"ml",Myanmar:"mm",Mongolia:"mn",Macau:"mo","Northern Mariana Islands":"mp",Martinique:"mq",Mauritania:"mr",Montserrat:"ms",Malta:"mt",Mauritius:"mu",Maldives:"mv",Malawi:"mw",Mexico:"mx",Malaysia:"my",Mozambique:"mz",Namibia:"na","New Caledonia":"nc",Niger:"ne","Norfolk Island":"nf",Nigeria:"ng",Nicaragua:"ni",Netherlands:"nl",Norway:"no",Nepal:"np",Nauru:"nr",Niue:"nu","New Zealand":"nz",Oman:"om",Panama:"pa",Peru:"pe","French Polynesia":"pf","Papua New Guinea":"pg",Philippines:"ph",Pakistan:"pk",Poland:"pl","Saint Pierre and Miquelon":"pm","Pitcairn Islands":"pn","Puerto Rico":"pr",Palestine:"ps",Portugal:"pt",Palau:"pw",Paraguay:"py",Qatar:"qa",R\u00E9union:"re",Romania:"ro",Serbia:"rs",Russia:"ru",Rwanda:"rw","Saudi Arabia":"sa","Solomon Islands":"sb",Seychelles:"sc",Sudan:"sd",Sweden:"se",Singapore:"sg","Saint Helena, Ascension and Tristan da Cunha":"sh",Slovenia:"si","Svalbard and Jan Mayen":"sj",Slovakia:"sk","Sierra Leone":"sl","San Marino":"sm",Senegal:"sn",Somalia:"so",Suriname:"sr","South Sudan":"ss","S\xE3o Tom\xE9 and Pr\xEDncipe":"st","El Salvador":"sv","Sint Maarten":"sx",Syria:"sy","Eswatini (Swaziland)":"sz","Turks and Caicos Islands":"tc",Chad:"td","French Southern and Antarctic Lands":"tf",Togo:"tg",Thailand:"th",Tajikistan:"tj",Tokelau:"tk","Timor-Leste":"tl",Turkmenistan:"tm",Tunisia:"tn",Tonga:"to",Turkey:"tr","Trinidad and Tobago":"tt",Tuvalu:"tv",Taiwan:"tw",Tanzania:"tz",Ukraine:"ua",Uganda:"ug","United States Minor Outlying Islands":"um","United Nations":"un","United States":"us",Uruguay:"uy",Uzbekistan:"uz","Vatican City (Holy See)":"va","Saint Vincent and the Grenadines":"vc",Venezuela:"ve","British Virgin Islands":"vg","United States Virgin Islands":"vi",Vietnam:"vn",Vanuatu:"vu","Wallis and Futuna":"wf",Samoa:"ws",Kosovo:"xk",Yemen:"ye",Mayotte:"yt","South Africa":"za",Zambia:"zm",Zimbabwe:"zw"};let H={};const Pt=(t,s)=>{t.value.features.forEach(a=>{const n=a.properties.NUTS_ID,o=a.properties.NAME_LATN,p=Object.values(s.value).find(S=>S[n]!=null)[n].country;H[n]={name:o,country:p}})},je=function(t){return H[t].name},Oe=function(t){return H[t].country},Ft=function(t){return Object.keys(H).find(s=>H[s].name===t)},zt=function(){return Object.values(H).map(t=>t.name)},Pe=function(t,s=!1){if(!t)return null;const a=Ot[H[t].country];return`https://flagcdn.com/${s?"w20":"w160"}/${a}.png`};var K=(t,s)=>{const a=t.__vccOpts||t;for(const[n,o]of s)a[n]=o;return a};const Gt=t=>(fe("data-v-1f8b0edf"),t=t(),_e(),t),At={id:"container"},Et=Gt(()=>e("canvas",{class:"webgl"},null,-1)),Rt={id:"tooltip",class:"box hidden"},qt={class:"title is-5"},Wt={class:"subtitle"},Ht=["src"],Ut={class:"vertical-align"},Vt={props:{geoData:Object,covidData:Object,selectedDate:Date,selectedNutsCode:String,textures:Object},emits:["regionSelected"],setup(t,{expose:s,emit:a}){const n=t;let o;const c=new re(370,370,-15),p=new re(1e3,500,2e3),S=362726,g=7193085,N="#333333",w={},x=700;let E=new Qe;const q=0,j=1,C={width:window.innerWidth+x,height:window.innerHeight};var l=new Ze,d=new Xe(75,C.width/C.height,1,1e4);d.position.set(p.x,p.y,p.z);var f=new et;f.layers.set(j);let k=new Q(-1,-1),i=F(null),r=new Z(16777215);r.position.set(c.x,c.y,c.z),r.layers.set(q,j),l.add(r);let T=new Z(16777215);T.position.set(0,0,1),T.layers.set(j),l.add(T);var G=new Z(16777215);G.position.set(1,0,0),G.layers.set(j),l.add(G);var oe=new Z(16777215);oe.position.set(-1,0,0),oe.layers.set(j),l.add(oe);let Re=new tt(16777215,.5);l.add(Re);let ie=300,qe=128,We=128,ce=n.textures.globeTexture,He=new at(ie,qe,We);ce.wrapS=we,ce.wrapT=we;let Ue=new ke({map:ce,color:11585768}),ve=new de(He,Ue);ve.layers.set(q),l.add(ve);function ye(u,h){l.add(E);const v=new lt(new rt(u),{depth:5,bevelEnabled:!1});return v.vertices.forEach((y,L)=>{let D;L<v.vertices.length/2?D=ie:D=ie+h;let b=(90-y.y)*Math.PI/180,_=(360-y.x)*Math.PI/180;y.x=D*Math.sin(b)*Math.cos(_),y.y=D*Math.cos(b),y.z=D*Math.sin(b)*Math.sin(_)}),v}function Ve(){n.geoData.features.forEach(h=>{const v=h.properties.NUTS_ID,y=[];if(h.geometry.coordinates.length===1){const b=h.geometry.coordinates[0].map(_=>new Q(_[0],_[1]));y.push(b)}else h.geometry.coordinates.forEach(b=>{if(b.length===1){const _=b[0].map(A=>new Q(A[0],A[1]));y.push(_)}else{const _=b.map(A=>new Q(A[0],A[1]));y.push(_)}});const L=[];y.forEach(b=>{const A=ye(b,1),le=new ke({color:16777215,side:ct}),J=new de(A,le);J.layers.set(j),J.name=v,E.add(J),L.push(J)});const D=[];y.forEach((b,_)=>{D.push({mesh:L[_],shape:b})}),w[v]=D})}function be(u){for(const h in w)w[h].forEach(({mesh:v,shape:y})=>{const L=n.covidData[n.selectedDate.toJSON()][h];let D,b;L!=null&&L.incidence?(D=new he(R.colorByIncidence(L.incidence)),b=R.extrusion(L.incidence)):(D=new he(N),b=R.extrusion(100));const _=ye(y,b);h!=n.selectedNutsCode&&new X(v.material.color).to(D,u).easing(ee.Quadratic.InOut).onUpdate(()=>{v.geometry.verticesNeedUpdate=!0}).start(),v.geometry.vertices.forEach((A,le)=>{new X(A).to(_.vertices[le],u).easing(ee.Quadratic.InOut).onUpdate(()=>{v.geometry.verticesNeedUpdate=!0}).start()})})}function W(u,h){if(!h){const y=n.covidData[n.selectedDate.toJSON()][u];h=new he(y!=null&&y.incidence?R.colorByIncidence(y.incidence):N)}w[u].forEach(({mesh:y})=>{y.material.color.set(h)})}function Ke(u,h){h&&W(h),u&&W(u,S)}s({animateToRegion:function(){const u=w[n.selectedNutsCode][0].mesh.geometry.vertices[0],h=new re(u.x,u.y,u.z),v=d.position.length();h.multiplyScalar(v/h.length()),new X(d.position).to(h,2e3).easing(ee.Cubic.Out).start()}});const Ye=Se({get(){const u=n.covidData[n.selectedDate.toJSON()][i.value];return u!=null&&u.incidence?`Incidencia: ${parseInt(u.incidence)}`:"Incidencia: no disponible"}}),Je=Se({get(){const u=n.covidData[n.selectedDate.toJSON()][i.value];return u!=null&&u.count?`Nuevos casos: ${u.count} (${(u.count/u.population*100).toFixed(2)}%)`:"Nuevos casos: no disponible"}});return Ne(async()=>{const u=document.querySelector(".webgl");var h=new st({antialias:!0,canvas:u});h.setSize(C.width,C.height);var v=new nt(d,h.domElement);v.enableDamping=!0,v.dampingFactor=.05,v.screenSpacePanning=!0,v.zoomSpeed=.2,v.minDistance=350,v.maxDistance=2e3;let y=document.querySelector("#container");y.style.right=`${x}px`;const L=new ot(1e4,1e4,1e4),D=new de(L,n.textures.skyboxTexture);l.add(D),o=document.querySelector("#tooltip"),u.addEventListener("mousemove",_=>{o.style=`top: ${_.clientY-6}px; left: ${_.clientX+15}px;`,k.x=_.clientX/(window.innerWidth+x)*2-1,k.y=-(_.clientY/window.innerHeight)*2+1}),window.addEventListener("resize",()=>{C.width=window.innerWidth+x,C.height=window.innerHeight,d.aspect=C.width/C.height,d.updateProjectionMatrix(),h.setSize(C.width,C.height)}),u.addEventListener("click",()=>{a("regionSelected",i.value)},!1);const b=()=>{h.autoClear=!0,d.layers.set(q),h.render(l,d),h.autoClear=!1,d.layers.set(j),h.render(l,d),f.setFromCamera(k,d);var _=f.intersectObjects(E.children);_.length>0?_[0].object.name!=i.value&&(o.classList.remove("hidden"),i.value&&i.value!=n.selectedNutsCode&&W(i.value),i.value=_[0].object.name,W(i.value,g),n.selectedNutsCode&&n.selectedNutsCode!=i&&W(n.selectedNutsCode,S)):(i.value&&W(i.value),n.selectedNutsCode&&W(n.selectedNutsCode,S),i.value=null,o.classList.add("hidden")),v.update(),it(),window.requestAnimationFrame(b)};ue(n.covidData,()=>{Ve(),be(3e3*1.3),new X(d.position).to(c,3e3).easing(ee.Cubic.Out).start()},{immediate:!0}),ue(()=>n.selectedDate,()=>be(300)),ue(()=>n.selectedNutsCode,Ke),b()}),(u,h)=>(M(),P("div",At,[Et,e("div",Rt,[e("h5",qt,O(m(i)?m(je)(m(i)):null),1),e("div",Wt,[e("img",{src:m(Pe)(m(i),!0),class:"vertical-align tooltip-flag-image"},null,8,Ht),e("span",Ut,O(m(i)?m(Oe)(m(i)):null),1)]),e("p",null,O(m(Ye)),1),e("p",null,O(m(Je)),1)])]))}};var Kt=K(Vt,[["__scopeId","data-v-1f8b0edf"]]);dt.register(ut,ht,mt,pt,ft,_t);const Yt={name:"BarChart",components:{Bar:gt},props:{chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:190},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},chartData:{type:Object},customTickCallback:{type:Function,default:void 0}},data(t){return{chartOptions:{responsive:!0,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"white"},grid:{color:"#ffffff33"}},y:{ticks:{color:"white",callback:t.customTickCallback?t.customTickCallback:void 0},grid:{color:"#ffffff33"}}}}}}};function Jt(t,s,a,n,o,c){const p=vt("Bar");return M(),Me(p,{"chart-options":o.chartOptions,"chart-data":a.chartData,"chart-id":a.chartId,"dataset-id-key":a.datasetIdKey,plugins:a.plugins,"css-classes":a.cssClasses,styles:a.styles,height:a.height},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles","height"])}var Ie=K(Yt,[["render",Jt]]);const Qt={},Zt={class:""},Xt={class:"columns is-centered"},ea={class:"vertical-center"},ta={class:"column"};function aa(t,s){return M(),P("div",Zt,[e("div",Xt,[e("div",ea,[e("div",ta,[yt(t.$slots,"default",{},void 0,!0)])])])])}var Fe=K(Qt,[["render",aa],["__scopeId","data-v-0eb7aff1"]]);const sa={class:"outer columns"},na={setup(t){const a=F([]);for(let n=0;n<20;n++){const o=n/20*R.maxIncidence;a.value.push(R.colorByIncidence(o))}return(n,o)=>(M(),P("div",sa,[(M(!0),P(bt,null,wt(a.value,c=>(M(),P("div",{class:"column",key:c,style:kt(`background-color: ${c}`)},null,4))),128))]))}};var oa=K(na,[["__scopeId","data-v-4ec49d9c"]]);function ze(t){return Object.keys(t.value?t.value:t).sort()}const Ge=function(t){return ze(t)[0]},Ae=function(t){const s=ze(t);return s[s.length-1]};const I=t=>(fe("data-v-19870b8e"),t=t(),_e(),t),ia={id:"menucontainer",class:"container"},ca={class:"columns is-centered is-vcentered"},la={class:"column is-narrow"},ra={class:"field has-addons"},da={class:"control has-icons-left"},ua=["innerHTML"],ha=I(()=>e("span",{class:"icon is-small is-left search-span"},[e("i",{class:"fa-solid fa-magnifying-glass"})],-1)),ma={class:"column"},pa={class:"column"},fa={class:"field has-addons"},_a={class:"control"},ga=I(()=>e("i",{class:"fas fa-angle-left"},null,-1)),va=[ga],ya={class:"control"},ba=I(()=>e("span",{class:"icon is-small"},[e("i",{class:"fas fa-calendar-day"})],-1)),wa=I(()=>e("span",null,"Hoy",-1)),ka=[ba,wa],Sa={class:"control"},xa=I(()=>e("i",{class:"fas fa-angle-right"},null,-1)),Ca=[xa],Da={key:0},Ia={class:"card transparent-background"},Na={class:"card-content"},Ma={class:"media"},Ta={class:"media-content"},La={class:"title is-4"},$a={class:"subtitle is-6"},Ba={class:"media-right"},ja={class:"image is-48x48"},Oa=["src"],Pa={class:"level"},Fa={class:"level-item has-text-centered"},za=I(()=>e("p",{class:"heading"},[e("i",{class:"fa fa-virus-covid-slash"}),ge(" Incidencia ")],-1)),Ga={class:"title"},Aa={class:"level-item has-text-centered"},Ea=I(()=>e("p",{class:"heading"},[e("i",{class:"fa fa-virus-covid"}),ge(" Nuevos Casos ")],-1)),Ra={class:"title"},qa={class:"level-item has-text-centered"},Wa=I(()=>e("p",{class:"heading"},[e("i",{class:"fa fa-people-group"}),ge(" Poblaci\xF3n ")],-1)),Ha={class:"title"},Ua={class:"heading is-italic"},Va=I(()=>e("h5",{class:"title is-5 chart-title"}," Incidencia accumulada de casos en 14 dias de las semanas pasadas ",-1)),Ka=I(()=>e("h5",{class:"title is-5 chart-title"},"Nuevos casos en semanas pasadas",-1)),Ya={class:"box transparent-background"},Ja={class:"columns is-vcentered"},Qa=I(()=>e("div",{class:"column is-one-fifth"},"Peligrosidad: ",-1)),Za={class:"column is-four-fifth gradient-column"},Xa={class:"columns is-vcentered"},es={class:"column"},ts={class:"label"},as={class:"column"},ss=["value"],ns=I(()=>e("div",{class:"column"},[e("label",{class:"label"},"Mostrar proporci\xF3n")],-1)),os={class:"column"},is={class:"field"},cs=I(()=>e("label",{for:"switchRoundedSuccess"},null,-1)),ls=I(()=>e("h2",{class:"title is-2"},"Selecciona una regi\xF3n en el mapa",-1)),rs={props:{geoData:Object,covidData:Object,selectedNutsCode:String,selectedDate:Date},emits:["search","dateSelected","oneWeekBack","oneWeekForward","jumpCurrentWeek"],setup(t,{emit:s}){const a=t;let n,o;const c=F(14),p=F(!1);function S(l){return l?l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"no disponible"}U({get(){return a.selectedNutsCode==""||a.covidData.length==0?null:a.covidData[a.selectedDate.toJSON()][a.selectedNutsCode]}});const g=U({get(){return!(!a.selectedNutsCode||a.covidData==null||Object.keys(a.covidData).length==0)}}),N=function(l,d){return l<n||l>$(o).add(6,"days").toDate()},w=U({get(){if(!g.value)return null;let l=a.covidData[a.selectedDate.toJSON()];if(!!l)return l[a.selectedNutsCode]}}),x=function(){const l=[],d=[];let f=$(a.selectedDate).subtract(c.value,"weeks");f.isDST();for(let k=0;k<c.value;k++)f.add(1,"weeks"),f=f.startOf("week"),f.utc(!0),l.push(f.toJSON()),d.push(f.format("DD/MM/YYYY"));return{accessors:l,labels:d}},E=U({get(){if(!g.value)return{labels:[],datasets:[]};const{accessors:l,labels:d}=x(),f=[],k=[];return l.forEach(i=>{var T;const r=(T=a.covidData[i])==null?void 0:T[a.selectedNutsCode];r!=null&&r.incidence?(f.push(parseFloat(r.incidence)),k.push(R.colorByIncidence(r.incidence))):(f.push(null),k.push(null))}),{labels:d,datasets:[{data:f,backgroundColor:k}]}}}),q=U({get(){if(!g.value)return{labels:[],datasets:[]};const{accessors:l,labels:d}=x(),f=[],k=[];return l.forEach(i=>{var T;const r=(T=a.covidData[i])==null?void 0:T[a.selectedNutsCode];if(r){const G=parseFloat(r.count)/parseFloat(r.population);f.push(p.value?G:parseFloat(r.count)),k.push(R.colorByProportion(G))}else f.push(null),k.push(null)}),{labels:d,datasets:[{data:f,backgroundColor:k}]}}}),j=function(l){const d=parseInt(l.target.value);c.value=d},C=function(){p.value=!p.value};return Ne(()=>{n=new Date(Ge(a.covidData)),o=new Date(Ae(a.covidData));const l=document.querySelector("input[name='date']");l.classList.add("input"),l.classList.remove("mx-input"),document.querySelector("div.mx-datepicker"),document.querySelector("#typeahead_id").classList.add("input")}),(l,d)=>{var f,k,i;return M(),P("div",ia,[e("div",ca,[e("div",la,[e("div",ra,[e("p",da,[z(m(St),{id:"typeahead_id",placeholder:"Buscar",items:m(zt)(),minInputLength:1,onSelectItem:d[0]||(d[0]=r=>s("search",r))},{"list-item-text":se(r=>[e("span",{innerHTML:r.boldMatchText(r.itemProjection(r.item)),class:"search-suggestion-text"},null,8,ua)]),_:1},8,["items"]),ha])])]),e("div",ma,[z(m(xt),{value:t.selectedDate,onChange:d[1]||(d[1]=r=>s("dateSelected",r)),type:"week",format:"DD/MM/YYYY",clearable:!1,lang:{formatLocale:{firstDayOfWeek:1}},"disabled-date":N},null,8,["value"])]),e("div",pa,[e("div",fa,[e("p",_a,[e("button",{class:"button",onClick:d[2]||(d[2]=r=>s("oneWeekBack"))},va)]),e("p",ya,[e("button",{class:"button",onClick:d[3]||(d[3]=r=>s("jumpCurrentWeek"))},ka)]),e("p",Sa,[e("button",{class:"button",onClick:d[4]||(d[4]=r=>s("oneWeekForward"))},Ca)])])])]),m(g)?(M(),P("div",Da,[e("div",Ia,[e("div",Na,[e("div",Ma,[e("div",Ta,[e("p",La,O(m(je)(t.selectedNutsCode)),1),e("p",$a,O(m(Oe)(t.selectedNutsCode)),1)]),e("div",Ba,[e("figure",ja,[e("img",{src:m(Pe)(t.selectedNutsCode),alt:"Placeholder image"},null,8,Oa)])])]),e("nav",Pa,[e("div",Fa,[e("div",null,[za,e("p",Ga,O(S(parseInt((f=m(w))==null?void 0:f.incidence))),1)])]),e("div",Aa,[e("div",null,[Ea,e("p",Ra,O(S((k=m(w))==null?void 0:k.count)),1)])]),e("div",qa,[e("div",null,[Wa,e("p",Ha,O(S((i=m(w))==null?void 0:i.population)),1)])])]),e("p",Ua," Datos para la semana del "+O(m($)(a.selectedDate).format("DD/MM/YYYY")),1)])]),e("div",null,[Va,z(Ie,{"v-if":m(g),chartData:m(E)},null,8,["v-if","chartData"]),Ka,z(Ie,{"v-if":m(g),chartData:m(q),"custom-tick-callback":(r,T,G)=>p.value?`${(r*100).toFixed(2)}%`:r},null,8,["v-if","chartData","custom-tick-callback"])]),e("div",Ya,[e("div",Ja,[Qa,e("div",Za,[z(oa)])]),e("div",Xa,[e("div",es,[e("label",ts,"Semanas mostradas: "+O(c.value),1)]),e("div",as,[e("input",{class:"slider is-fullwidth is-info is-circle has-output-tooltip",step:"1",min:"5",max:"20",value:c.value,type:"range",onInput:j},null,40,ss)]),ns,e("div",os,[e("div",is,[e("input",{id:"switchRoundedSuccess",type:"checkbox",name:"switchRoundedSuccess",class:"switch is-rounded is-info",onChange:C},null,32),cs])])])])])):(M(),Me(Fe,{key:1},{default:se(()=>[ls]),_:1}))])}}};var ds=K(rs,[["__scopeId","data-v-19870b8e"]]);const B=t=>(fe("data-v-7aa2fa56"),t=t(),_e(),t),us={class:"lds-spinner"},hs=B(()=>e("div",null,null,-1)),ms=B(()=>e("div",null,null,-1)),ps=B(()=>e("div",null,null,-1)),fs=B(()=>e("div",null,null,-1)),_s=B(()=>e("div",null,null,-1)),gs=B(()=>e("div",null,null,-1)),vs=B(()=>e("div",null,null,-1)),ys=B(()=>e("div",null,null,-1)),bs=B(()=>e("div",null,null,-1)),ws=B(()=>e("div",null,null,-1)),ks=B(()=>e("div",null,null,-1)),Ss=B(()=>e("div",null,null,-1)),xs=[hs,ms,ps,fs,_s,gs,vs,ys,bs,ws,ks,Ss],Cs={setup(t){return(s,a)=>(M(),P("div",us,xs))}};var Ds=K(Cs,[["__scopeId","data-v-7aa2fa56"]]);const Is=new Ct,Ns=new Te;function Ms(t){return new Promise((s,a)=>{Is.load(t,n=>{s(JSON.parse(n))},null,n=>{a(n)})})}function Ee(t){return new Promise((s,a)=>{Ns.load(t,n=>{s(n)})})}const Ts=async function(t){return await Ee(t)};function Ls(t){const s=".png";return["ft","bk","up","dn","rt","lf"].map(o=>t+"_"+o+s)}const $s=async function(t){new Te;const s=Ls(t);return Promise.all(s.map(async n=>{let o=await Ee(n);return new Dt({map:o,side:It,transparent:!0,opacity:.5})}))};var te={jsonFile:Ms,globeTexture:Ts,skyboxTexture:$s};const Bs={key:0},js={key:0,class:"loading-container"},Os=e("br",null,null,-1),Ps=e("br",null,null,-1),Fs=e("h3",{class:"title is-3"},"cargando....",-1),zs={setup(t){$.updateLocale("en",{week:{dow:1,doy:4}});const s="8081_earthmap10k.jpeg",a="skybox/corona",n="NUTS_RG_60M_2021_4326.geojson",o="sample-covid-data-2022-12.json";let c,p;const S=F({}),g=F({}),N=F({}),w=F(null),x=F(null),E=F(null);Promise.all([te.jsonFile(n),te.jsonFile(o),te.globeTexture(s),te.skyboxTexture(a)]).then(([i,r,T,G])=>{S.value=i,g.value=r,N.value.globeTexture=T,N.value.skyboxTexture=G,c=Ge(g),p=Ae(g),Pt(S,g),x.value=new Date(p)});const q=async function(i){w.value=Ft(i),await Ce(),E.value.animateToRegion()},j=async function(i){w.value=i,await Ce(),document.querySelector("#typeahead_id").value=""},C=U(()=>x.value!=null),l=function(i){let r=i._isAMomentObject?i:$(i);r.startOf("week"),r.utc(!0),r>$(p)?x.value=$(p).toDate():r<$(c)?x.value=$(c).toDate():x.value=r.toDate()},d=function(){let i=$(x.value);i.subtract(1,"w"),l(i.toDate())},f=function(){let i=$(x.value);i.add(1,"w"),l(i.toDate())},k=function(){let i=$();i.utc(!0),i.startOf("week"),l(i.toDate())};return(i,r)=>(M(),P("div",null,[m(C)?(M(),P("div",Bs,[z(ds,{"geo-data":S.value,"covid-data":g.value,selectedNutsCode:w.value,"selected-date":x.value,onDateSelected:l,onOneWeekBack:d,onOneWeekForward:f,onJumpCurrentWeek:k,onSearch:q},null,8,["geo-data","covid-data","selectedNutsCode","selected-date"]),z(Kt,{"geo-data":S.value,"covid-data":g.value,"selected-date":x.value,"selected-nuts-code":w.value,textures:N.value,onRegionSelected:j,ref_key:"globe",ref:E},null,8,["geo-data","covid-data","selected-date","selected-nuts-code","textures"])])):xe("",!0),z(Nt,{name:"fade"},{default:se(()=>[m(C)?xe("",!0):(M(),P("div",js,[z(Fe,null,{default:se(()=>[z(Ds),Os,Ps,Fs]),_:1})]))]),_:1})]))}};Mt(zs).mount("#app");
